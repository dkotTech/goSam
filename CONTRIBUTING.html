<html>
  <head>
    <title>
      goSam
    </title>
    <meta name="author" content="eyedeekay" />
    <meta name="description" content="goSam" />
    <meta name="keywords" content="master" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" type="text/css" href="showhider.css" />
  </head>
  <body>
    <div id="navbar">
      <a href="#shownav">
        Show navigation
      </a>
      <div id="shownav">
        <div id="hidenav">
          <ul>
            <li>
              <a href="index.html">
                index
              </a>
            </li>
            <li>
              <a href="CONTRIBUTING.html">
                CONTRIBUTING
              </a>
            </li>
          </ul>
          <br>
          <a href="#hidenav">
            Hide Navigation
          </a>
        </div>
      </div>
    </div>
    <h1>
      <a href="#how-to-make-contributions-to-gosam" rel="nofollow">
        <span></span>
      </a>
      How to make contributions to goSam
    </h1>
    <p>
      Welcome to goSam, the easy-to-use http client for i2p. We&#39;re glad you&#39;re here
      and interested in contributing. Here&#39;s some help getting started.
    </p>
    <h2>
      <a href="#table-of-contents" rel="nofollow">
        <span></span>
      </a>
      Table of Contents
    </h2>
    <ul>
      <li>
        (1) Environment
      </li>
      <li>
        (2) Testing
      </li>
      <li>
        (3) Filing Issues/Reporting Bugs/Making Suggestions
      </li>
      <li>
        (4) Contributing Code/Style Guide
        <ul>
          <li>
            (a) Adding i2cp and tunnel Options
          </li>
          <li>
            (b) Writing Tests
          </li>
          <li>
            (c) Style
          </li>
          <li>
            (d) Other kinds of modification?
          </li>
        </ul>
      </li>
      <li>
        (5) Conduct
      </li>
    </ul>
    <h3>
      <a href="#1-environment" rel="nofollow">
        <span></span>
      </a>
      (1) Environment
    </h3>
    <p>
      goSam is a simple go library. You are free to use an IDE if you wish, but all
      that is required to build and test the library are a go compiler and the gofmt
      tool. Git is the version control system. All the files in the library are in a
      single root directory. Invoking go build from this directory not generate any
      files.
    </p>
    <h3>
      <a href="#2-testing" rel="nofollow">
        <span></span>
      </a>
      (2) Testing
    </h3>
    <p>
      Tests are implemented using the standard go &#34;testing&#34; library in files named
      &#34;file_test.go,&#34; so tests of the client go in client_test.go, name lookups
      in naming_test.go, et cetera. Everything that can be tested, should be tested.
    </p>
    <p>
      Testing is done by running
    </p>
    <pre><code>    go test
</code></pre>
    <p>
      More information about designing tests is below in the
      <strong>
        Contributing Code/Style Guide
      </strong>
      section below.
    </p>
    <h3>
      <a href="#3-filing-issues-reporting-bugs-making-suggestions" rel="nofollow">
        <span></span>
      </a>
      (3) Filing issues/Reporting bugs/Making suggestions
    </h3>
    <p>
      If you discover the library doing something you don&#39;t think is right, please let
      us know! Just filing an issue here is OK.
    </p>
    <p>
      If you need to suggest a feature, we&#39;re happy to hear from you too. Filing an
      issue will give us a place to discuss how it&#39;s implemented openly and publicly.
    </p>
    <p>
      Please file an issue for your new code contributions in order to provide us with
      a place to discuss them for inclusion.
    </p>
    <h3>
      <a href="#4-contributing-code-style-guide" rel="nofollow">
        <span></span>
      </a>
      (4) Contributing Code/Style Guide
    </h3>
    <p>
      Welcome new coders. We have good news for you, this library is really easy to
      contribute to. The easiest contributions take the form of i2cp and tunnel
      options.
    </p>
    <h4>
      <a href="#a-adding-i2cp-and-tunnel-options" rel="nofollow">
        <span></span>
      </a>
      (a) Adding i2cp and tunnel Options
    </h4>
    <p>
      First, add a variable to store the state of your new option. For example, the
      existing variables are in the Client class
      <a href="https://github.com/cryptix/goSam/blob/701d7fcf03ddb354262fe213163dcf6f202a24f1/client.go#L29" rel="nofollow">
        here:
      </a>
    </p>
    <p>
      i2cp and tunnel options are added in a highly uniform process of basically three
      steps. First, you create a functional argument in the options.go file, in the
      form:
    </p>
    <div>
      <pre>        <span>// SetOPTION sets $OPTION</span>
        <span>func</span> <span>SetOPTION</span><span>(</span><span>arg</span> <span>type</span><span>)</span> <span>func</span><span>(</span><span>*</span><span>Client</span><span>)</span> <span>error</span> <span>{</span>  <span>// arg type</span>
            <span>return</span> <span>func</span><span>(</span><span>c</span> <span>*</span><span>Client</span><span>)</span> <span>error</span> <span>{</span>              <span>// pass a client to the inner function and declare error return function</span>
                <span>if</span> <span>arg</span> <span>==</span> <span>valid</span> <span>{</span>                       <span>// validate the argument</span>
                    <span>c</span><span>.</span><span>option</span> <span>=</span> <span>s</span>                        <span>// set the variable to the argument value</span>
                    <span>return</span> <span>nil</span>                          <span>// if option is set successfully return nil error</span>
                <span>}</span>
                <span>return</span> <span>fmt</span><span>.</span><span>Errorf</span><span>(</span><span>&#34;Invalid argument:&#34;</span> <span>arg</span><span>)</span> <span>// return a descriptive error if arg is invalid</span>
            <span>}</span>
        <span>}</span>
</pre>
    </div>
    <p>
      <a href="https://github.com/cryptix/goSam/blob/701d7fcf03ddb354262fe213163dcf6f202a24f1/options.go#L187" rel="nofollow">
        example
      </a>
    </p>
    <p>
      Next, you create a getter which prepares the option. Regardless of the type of
      option that is set, these must return strings representing valid i2cp options.
    </p>
    <div>
      <pre>        <span>//return the OPTION as a string.</span>
        <span>func</span> <span>(</span><span>c</span> <span>*</span><span>Client</span><span>)</span> <span>option</span><span>(</span><span>)</span> <span>string</span> <span>{</span>
            <span>return</span> <span>fmt</span><span>.</span><span>Sprintf</span><span>(</span><span>&#34;i2cp.option=%d&#34;</span><span>,</span> <span>c</span><span>.</span><span>option</span><span>)</span>
        <span>}</span>
</pre>
    </div>
    <p>
      <a href="https://github.com/cryptix/goSam/blob/701d7fcf03ddb354262fe213163dcf6f202a24f1/options.go#L299" rel="nofollow">
        example
      </a>
    </p>
    <p>
      Lastly, you&#39;ll need to add it to the allOptions function and the
      Client.NewClient() function. To add it to allOptions, it looks like this:
    </p>
    <div>
      <pre>        <span>//return all options as string ready for passing to sendcmd</span>
        <span>func</span> <span>(</span><span>c</span> <span>*</span><span>Client</span><span>)</span> <span>allOptions</span><span>(</span><span>)</span> <span>string</span> <span>{</span>
            <span>return</span> <span>c</span><span>.</span><span>inlength</span><span>(</span><span>)</span> <span>+</span> <span>&#34; &#34;</span> <span>+</span>
                <span>c</span><span>.</span><span>outlength</span><span>(</span><span>)</span> <span>+</span> <span>&#34; &#34;</span> <span>+</span>
                <span>...</span> <span>//other options removed from example for brevity</span>
                <span>c</span><span>.</span><span>option</span><span>(</span><span>)</span>
        <span>}</span>
</pre>
    </div>
    <div>
      <pre>        <span>//return all options as string ready for passing to sendcmd</span>
        <span>func</span> <span>(</span><span>c</span> <span>*</span><span>Client</span><span>)</span> <span>NewClient</span><span>(</span><span>)</span> <span>(</span><span>*</span><span>Client</span><span>,</span> <span>error</span><span>)</span> <span>{</span>
            <span>return</span> <span>NewClientFromOptions</span><span>(</span>
                <span>SetHost</span><span>(</span><span>c</span><span>.</span><span>host</span><span>)</span><span>,</span>
                <span>SetPort</span><span>(</span><span>c</span><span>.</span><span>port</span><span>)</span><span>,</span>
                <span>...</span> <span>//other options removed from example for brevity</span>
                <span>SetCompression</span><span>(</span><span>c</span><span>.</span><span>compression</span><span>)</span><span>,</span>
                <span>setlastaddr</span><span>(</span><span>c</span><span>.</span><span>lastaddr</span><span>)</span><span>,</span>
                <span>setid</span><span>(</span><span>c</span><span>.</span><span>id</span><span>)</span><span>,</span>
            <span>)</span>
        <span>}</span>
</pre>
    </div>
    <p>
      <a href="https://github.com/cryptix/goSam/blob/701d7fcf03ddb354262fe213163dcf6f202a24f1/options.go#L333" rel="nofollow">
        example
      </a>
    </p>
    <h4>
      <a href="#b-writing-tests" rel="nofollow">
        <span></span>
      </a>
      (b) Writing Tests
    </h4>
    <p>
      Before the feature can be added, you&#39;ll need to add a test for it to
      options_test.go. To do this, just add your new option to the long TestOptions
      functions in options_test.go.
    </p>
    <div>
      <pre>        <span>func</span> <span>TestOptionHost</span><span>(</span><span>t</span> <span>*</span><span>testing</span><span>.</span><span>T</span><span>)</span> <span>{</span>
            <span>client</span><span>,</span> <span>err</span> <span>:=</span> <span>NewClientFromOptions</span><span>(</span>
                <span>SetHost</span><span>(</span><span>&#34;127.0.0.1&#34;</span><span>)</span><span>,</span>
                <span>SetPort</span><span>(</span><span>&#34;7656&#34;</span><span>)</span><span>,</span>
                <span>...</span> <span>//other options removed from example for brevity</span>
                <span>SetCloseIdleTime</span><span>(</span><span>300001</span><span>)</span><span>,</span>
            <span>)</span>
            <span>if</span> <span>err</span> <span>!=</span> <span>nil</span> <span>{</span>
                <span>t</span><span>.</span><span>Fatalf</span><span>(</span><span>&#34;NewClientFromOptions() Error: %q\n&#34;</span><span>,</span> <span>err</span><span>)</span>
            <span>}</span>
            <span>if</span> <span>result</span><span>,</span> <span>err</span> <span>:=</span> <span>client</span><span>.</span><span>validCreate</span><span>(</span><span>)</span><span>;</span> <span>err</span> <span>!=</span> <span>nil</span> <span>{</span>
                <span>t</span><span>.</span><span>Fatalf</span><span>(</span><span>err</span><span>.</span><span>Error</span><span>(</span><span>)</span><span>)</span>
            <span>}</span> <span>else</span> <span>{</span>
                <span>t</span><span>.</span><span>Log</span><span>(</span><span>result</span><span>)</span>
            <span>}</span>
            <span>client</span><span>.</span><span>CreateStreamSession</span><span>(</span><span>&#34;&#34;</span><span>)</span>
            <span>if</span> <span>err</span> <span>:=</span> <span>client</span><span>.</span><span>Close</span><span>(</span><span>)</span><span>;</span> <span>err</span> <span>!=</span> <span>nil</span> <span>{</span>
                <span>t</span><span>.</span><span>Fatalf</span><span>(</span><span>&#34;client.Close() Error: %q\n&#34;</span><span>,</span> <span>err</span><span>)</span>
            <span>}</span>
        <span>}</span>

        <span>func</span> <span>TestOptionPortInt</span><span>(</span><span>t</span> <span>*</span><span>testing</span><span>.</span><span>T</span><span>)</span> <span>{</span>
            <span>client</span><span>,</span> <span>err</span> <span>:=</span> <span>NewClientFromOptions</span><span>(</span>
                <span>SetHost</span><span>(</span><span>&#34;127.0.0.1&#34;</span><span>)</span><span>,</span>
                <span>SetPortInt</span><span>(</span><span>7656</span><span>)</span><span>,</span>
                <span>...</span> <span>//other options removed from example for brevity</span>
                <span>SetUnpublished</span><span>(</span><span>true</span><span>)</span><span>,</span>
            <span>)</span>
            <span>if</span> <span>err</span> <span>!=</span> <span>nil</span> <span>{</span>
                <span>t</span><span>.</span><span>Fatalf</span><span>(</span><span>&#34;NewClientFromOptions() Error: %q\n&#34;</span><span>,</span> <span>err</span><span>)</span>
            <span>}</span>
            <span>if</span> <span>result</span><span>,</span> <span>err</span> <span>:=</span> <span>client</span><span>.</span><span>validCreate</span><span>(</span><span>)</span><span>;</span> <span>err</span> <span>!=</span> <span>nil</span> <span>{</span>
                <span>t</span><span>.</span><span>Fatalf</span><span>(</span><span>err</span><span>.</span><span>Error</span><span>(</span><span>)</span><span>)</span>
            <span>}</span> <span>else</span> <span>{</span>
                <span>t</span><span>.</span><span>Log</span><span>(</span><span>result</span><span>)</span>
            <span>}</span>
            <span>client</span><span>.</span><span>CreateStreamSession</span><span>(</span><span>&#34;&#34;</span><span>)</span>
            <span>if</span> <span>err</span> <span>:=</span> <span>client</span><span>.</span><span>Close</span><span>(</span><span>)</span><span>;</span> <span>err</span> <span>!=</span> <span>nil</span> <span>{</span>
                <span>t</span><span>.</span><span>Fatalf</span><span>(</span><span>&#34;client.Close() Error: %q\n&#34;</span><span>,</span> <span>err</span><span>)</span>
            <span>}</span>
        <span>}</span>

</pre>
    </div>
    <p>
      If any of these tasks fail, then the test should fail.
    </p>
    <h4>
      <a href="#c-style" rel="nofollow">
        <span></span>
      </a>
      (c) Style
    </h4>
    <p>
      It&#39;s pretty simple to make sure the code style is right, just run gofmt over it
      to adjust the indentation, and golint over it to ensure that your comments are
      of the correct form for the documentation generator.
    </p>
    <h4>
      <a href="#d-other-kinds-of-modification" rel="nofollow">
        <span></span>
      </a>
      (d) Other kinds of modification?
    </h4>
    <p>
      It may be useful to extend goSam in other ways. Since there&#39;s not a
      one-size-fits-all uniform way of dealing with these kinds of changes, open an
      issue for discussion and
    </p>
    <h3>
      <a href="#5-conduct" rel="nofollow">
        <span></span>
      </a>
      (5) Conduct
    </h3>
    <p>
      This is a small-ish, straightforward library intended to enable a clear
      technical task. We should be able to be civil with eachother, and give and
      accept criticism contructively and respectfully.
    </p>
    <p>
      This document was drawn from the examples given by Mozilla
      <a href="mozillascience.github.io/working-open-workshop/contributing/" rel="nofollow">
        here
      </a>
    </p>
    <div>
      <a href="#show">
        Show license
      </a>
      <div id="show">
        <div id="hide">
          <pre><code>The MIT License (MIT)

Copyright (c) 2014 Henry

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

</code></pre>
          <a href="#hide">
            Hide license
          </a>
        </div>
      </div>
    </div>
    <div>
      <iframe src="https://snowflake.torproject.org/embed.html" width="320" height="240" frameborder="0" scrolling="no"></iframe>
    </div>
    <div>
      <a href="https://geti2p.net/">
        <img src="i2plogo.png"></img>
        I2P
      </a>
    </div>
  </body>
</html>